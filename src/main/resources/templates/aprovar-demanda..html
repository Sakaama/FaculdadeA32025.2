<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Aprovar Demandas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">

    <main class="d-flex flex-column align-items-center justify-content-start min-vh-100">
        <h1 class="mt-5 mb-4 text-center fw-bold" style="color:#222;">Aprovar Demandas</h1>

        <div class="card shadow-lg rounded-4 w-100" style="max-width: 900px; margin-top: 16px; min-height: 500px;">
            <div class="card-body">
                <table class="table table-hover align-middle rounded-4 overflow-hidden mb-0">
                    <thead class="table-dark">
                        <tr>
                            <th>Projeto</th>
                            <th>Descrição</th>
                            <th>Cliente</th>
                            <th>Status</th>
                            <th>Ações</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="demanda : ${demandas}">
                            <td th:text="${demanda.nome}">Projeto Exemplo</td>
                            <td th:text="${demanda.descricao}">Descrição breve do projeto</td>
                            <td th:text="${demanda.cliente.nome}">Cliente Exemplo</td>
                            <td>
                                <span th:text="${demanda.status}"
                                    th:classappend="${demanda.status == 'AGUARDANDO_APROVACAO'} ? 'badge bg-warning text-dark' : demanda.status == 'APROVADO' ? 'badge bg-success' : 'badge bg-danger'">
                                    AGUARDANDO
                                </span>
                            </td>
                            <td>
                                <form th:action="@{/demandas/{id}/aprovar(id=${demanda.id})}" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-success btn-sm rounded-3 mx-1">Aprovar</button>
                                </form>
                                <form th:action="@{/demandas/{id}/rejeitar(id=${demanda.id})}" method="post" class="d-inline">
                                    <button type="submit" class="btn btn-danger btn-sm rounded-3 mx-1">Rejeitar</button>
                                </form>
                            </td>
                        </tr>
                        <tr th:if="${#lists.isEmpty(demandas)}">
                            <td colspan="5" class="text-center text-muted">Nenhuma demanda pendente.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

    </main>
</body>
</html>