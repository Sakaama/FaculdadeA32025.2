<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Painel do Gerente</title>
    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
    <div class="container mt-5">
        <h1 class="text-center mb-4">ðŸ“Š Painel do Gerente</h1>

        <div class="card shadow-lg rounded-3">
            <div class="card-body">
                <h2 class="h5 mb-3">Projetos Aprovados NÃ£o Alocados</h2>
                <table class="table table-hover align-middle">
                    <thead class="table-dark">
                        <tr>
                            <th>ID</th>
                            <th>Nome</th>
                            <th>Status</th>
                            <th>Fase</th>
                            <th class="text-center">AÃ§Ãµes</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr th:each="projeto : ${projetos}">
                            <td th:text="${projeto.id}"></td>
                            <td th:text="${projeto.nome}"></td>
                            <td>
                                <span class="badge bg-success" th:if="${projeto.status == 'APROVADO'}">Aprovado</span>
                                <span class="badge bg-warning text-dark" th:if="${projeto.status == 'PENDENTE'}">Pendente</span>
                                <span class="badge bg-danger" th:if="${projeto.status == 'REJEITADO'}">Rejeitado</span>
                            </td>
                            <td>
                                <span th:text="${projeto.fase}"></span>
                            </td>
                            <td class="text-center">
                                <!-- FormulÃ¡rio para alocar -->
                                <form method="post" th:action="@{/gerente/alocar}" class="d-inline">
                                    <input type="hidden" name="projetoId" th:value="${projeto.id}"/>
                                    <select class="form-select form-select-sm d-inline w-auto" name="equipeId" required>
                                        <option value="" disabled selected>Equipe</option>
                                        <option value="1">Equipe Alpha</option>
                                        <option value="2">Equipe Beta</option>
                                        <option value="3">Equipe Gamma</option>
                                    </select>
                                    <button type="submit" class="btn btn-sm btn-primary">Alocar</button>
                                </form>

                                <!-- FormulÃ¡rio para mudar fase -->
                                <form method="post" th:action="@{/gerente/fase}" class="d-inline ms-2">
                                    <input type="hidden" name="projetoId" th:value="${projeto.id}"/>
                                    <select class="form-select form-select-sm d-inline w-auto" name="novaFase" required>
                                        <option value="COMECO">ComeÃ§o</option>
                                        <option value="DESENVOLVIMENTO">Desenvolvimento</option>
                                        <option value="FINALIZACAO">FinalizaÃ§Ã£o</option>
                                    </select>
                                    <button type="submit" class="btn btn-sm btn-secondary">Atualizar</button>
                                </form>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
